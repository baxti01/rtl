# RTL тестовое задание
### Описание задачи
Написать алгоритма агрегации статистических
данных о зарплатах сотрудников компании по
временным промежуткам.

На обычном языке пример задачи выглядит следующим
образом: “Необходимо посчитать суммы всех выплат 
с {28.02.2022} по {31.03.2022}, 
единица группировки - {день}”. Типы агрегации могут быть следующие: hour, day, month.

#### Пример входных и выходных данных
```
# входные данные
input = {
"dt_from":"2022-09-01T00:00:00",
"dt_upto":"2022-12-31T23:59:00",
"group_type":"month"
}

....

# выходные данные
output = {
"dataset":[5906586, 5515874, 5889803, 6092634],
"labels": ["2022-09-01T00:00:00","2022-10-01T00:00:00",
            "2022-11-01T00:00:00", "2022-12-01T00:00:00"]
 }
```
**Комментарий к ответу**: в нулевом элементе датасета содержится сумма всех выплат за сентябрь, в первом элементе сумма всех выплат за октябрь и т.д. В лейблах подписи соответственно элементам датасета.


### Стек технологий
- Python
- asyncio
- aiogram
- Mongo
- Docker

---
### Запуск проекта
#### Создаём .env файл и добавляем следующие настройки
- Настройки бота
  - `BOT_TOKEN=`... (обязательное поле)
- Настройки базы данных 
  - `MONGO_HOST=`... (поумолчанию localhost)
  - `MONGO_PORT=`... (поумолчанию 27017)
  - `MONGO_INITDB_ROOT_USERNAME=`... (обязательное поле)
  - `MONGO_INITDB_ROOT_PASSWORD=`... (обязательное поле)

#### Запускаем проект на компьютере
Устанавливаем зависимости.
```
pip install -r requirements.txt
```
И запускаем проект 1 раз, import_db.py используется
для заполнения базы данными
```
python import_db.py && python bot.py
```
Последующие запуски можно делать так:
```
python bot.py
```

### Запускаем проект в docker.
Но для этого обязательно укажите **MONGO_HOST=mongodb**

```
docker-compose up
```

И пользуемся!

---
## [Сам бот](https://t.me/RTL_10101_bot)

---